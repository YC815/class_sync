這是一份根據您提供的對話紀錄整理而成的 API 說明文件。我將內容結構化，方便未來開發與前端串接參考：

## 課表同步 API (Schedule Sync API)

此 API 用於觸發並同步特定學生的課表資料至系統中。

- **請求方法 (Method):** `POST`
- **端點 URL (Endpoint):** `.env裡面的RAY_URL(只有網域＋/api) /public/sync`

---

### 請求參數 (Request Payload)

資料格式為 JSON，需包含以下欄位作為 Request Body 傳送：

| 欄位名稱 | 資料型態 | 說明                   | 範例值                       |
| -------- | -------- | ---------------------- | ---------------------------- |
| `userId` | String   | 欲抓取課表的學生學號。 | `"11430316"`                 |
| `apiKey` | String   | 驗證用的 API 密鑰。    | `".env裡面的RAY_API_SECRET"` |

**請求範例 (JSON)：**

```json
{
  "userId": "欲查詢的學號",
  "apiKey": ".env裡面的RAY_API_SECRET"
}
```

---

### 回應格式 (Response)

當請求完成後，伺服器會回傳 JSON 格式的狀態結果，可用於判斷資料是否抓取成功。

| 欄位名稱      | 資料型態 | 說明                                                                |
| ------------- | -------- | ------------------------------------------------------------------- |
| `success`     | Boolean  | 標示同步是否成功（`true` 代表成功）。前端可依賴此欄位進行錯誤處理。 |
| `userId`      | String   | 成功處理的學生學號。                                                |
| `syncedWeeks` | Integer  | 成功抓取並同步的課表總週數。                                        |
| `message`     | String   | 系統回傳的詳細狀態描述，適合直接顯示給使用者看。                    |

**成功回應範例 (JSON)：**

```json
{
  "success": true,
  "userId": "11430316",
  "syncedWeeks": 20,
  "message": "學號 11430316 同步成功，共完成 20 週資料更新。"
}
```

---

### UI / UX 實作建議

- **按鈕設計：** 在前端介面的明顯位置（例如課表頁面上方或側邊欄），新增一個名為「**抓取課表**」的按鈕，並綁定此 API 的 POST 事件。
- **狀態回饋：** 1. 使用者點擊「抓取課表」時，按鈕可轉為「讀取中...」以避免重複點擊。

2. 接收到回應後，判斷 `success` 是否為 `true`。若為 `true`，則將 `message` 的內容（例如：「_學號 11430316 同步成功..._」）透過 Toast 或 Alert 提示框顯示給使用者，讓他們明確知道抓取已完成。

學號是使用者的mail
(如：11430112@tschool.tp.edu.tw)前面的數字
需要防呆以防使用者用其他帳號登入 如果不符合此前對格式 就會被擋下來
